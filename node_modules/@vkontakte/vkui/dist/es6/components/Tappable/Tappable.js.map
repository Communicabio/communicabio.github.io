{"version":3,"sources":["../../../../src/components/Tappable/Tappable.tsx"],"names":["React","Component","Touch","TouchRootContext","classNames","getClassName","ANDROID","getOffsetRect","coordX","coordY","withPlatform","ts","Date","now","ACTIVE_DELAY","ACTIVE_EFFECT_DELAY","storage","deactivateOtherInstances","exclude","Object","keys","filter","id","forEach","clearTimeout","activeTimeout","timeout","stop","Tappable","props","originalEvent","insideTouchRoot","stopPropagation","touches","length","platform","onDown","window","setTimeout","start","shiftXAbs","shiftYAbs","isSlide","state","active","activeEffectDelay","store","getStorage","e","container","top","left","x","y","key","toString","setState","clicks","wavesTimeout","getRootRef","current","Math","round","random","children","className","restProps","classes","RootComponent","disabled","onStart","onMove","onEnd","getRef","ref","map","k","role"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAA8D,OAA9D;AACA,OAAOC,KAAP,MAAiE,gBAAjE;AACA,OAAOC,gBAAP,MAA6B,uBAA7B;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,aAAT,QAA8B,kBAA9B;AACA,SAASC,MAAT,EAAiBC,MAAjB,QAAqE,iBAArE;AAEA,OAAOC,YAAP,MAAyB,wBAAzB;;AAsCA,IAAMC,EAAE,GAAG,SAALA,EAAK;AAAA,SAAM,CAACC,IAAI,CAACC,GAAL,EAAP;AAAA,CAAX;;AAEA,OAAO,IAAMC,YAAY,GAAG,EAArB;AACP,OAAO,IAAMC,mBAAmB,GAAG,GAA5B;AAEP,IAAIC,OAAgB,GAAG,EAAvB;AAEA;;;;AAGA,SAASC,wBAAT,CAAkCC,OAAlC,EAAoD;AAClDC,EAAAA,MAAM,CAACC,IAAP,CAAYJ,OAAZ,EAAqBK,MAArB,CAA4B,UAACC,EAAD;AAAA,WAAgBA,EAAE,KAAKJ,OAAvB;AAAA,GAA5B,EAA4DK,OAA5D,CAAoE,UAACD,EAAD,EAAgB;AAClFE,IAAAA,YAAY,CAACR,OAAO,CAACM,EAAD,CAAP,CAAYG,aAAb,CAAZ;AACAD,IAAAA,YAAY,CAACR,OAAO,CAACM,EAAD,CAAP,CAAYI,OAAb,CAAZ;AACAV,IAAAA,OAAO,CAACM,EAAD,CAAP,CAAYK,IAAZ;AAEA,WAAOX,OAAO,CAACM,EAAD,CAAd;AACD,GAND;AAOD;;IAEKM,Q;;;;;AACJ,oBAAYC,KAAZ,EAAkC;AAAA;;AAAA;;AAChC,8BAAMA,KAAN;;AADgC;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,8DAkCL,gBAAmC;AAAA,UAAhCC,aAAgC,QAAhCA,aAAgC;AAC9D,OAAC,MAAKC,eAAN,IAAyB,MAAKF,KAAL,CAAWG,eAApC,IAAuDF,aAAa,CAACE,eAAd,EAAvD;;AACA,UAAIF,aAAa,CAACG,OAAd,IAAyBH,aAAa,CAACG,OAAd,CAAsBC,MAAtB,GAA+B,CAA5D,EAA+D;AAC7DjB,QAAAA,wBAAwB;AACxB;AACD;;AAED,UAAI,MAAKY,KAAL,CAAWM,QAAX,KAAwB7B,OAA5B,EAAqC;AACnC,cAAK8B,MAAL,CAAYN,aAAZ;AACD;;AAEDd,MAAAA,OAAO,CAAC,MAAKM,EAAN,CAAP,GAAmB;AACjBK,QAAAA,IAAI,EAAE,MAAKA,IADM;AAEjBF,QAAAA,aAAa,EAAEY,MAAM,CAACC,UAAP,CAAkB,MAAKC,KAAvB,EAA8BzB,YAA9B;AAFE,OAAnB;AAID,KAjDiC;;AAAA,6DAsDN,iBAAyD;AAAA,UAAtDgB,aAAsD,SAAtDA,aAAsD;AAAA,UAAvCU,SAAuC,SAAvCA,SAAuC;AAAA,UAA5BC,SAA4B,SAA5BA,SAA4B;AACnF,OAAC,MAAKV,eAAN,IAAyB,MAAKF,KAAL,CAAWG,eAApC,IAAuDF,aAAa,CAACE,eAAd,EAAvD;;AACA,UAAIQ,SAAS,GAAG,EAAZ,IAAkBC,SAAS,GAAG,EAAlC,EAAsC;AACpC,cAAKC,OAAL,GAAe,IAAf;;AACA,cAAKf,IAAL;AACD;AACF,KA5DiC;;AAAA,4DAiEP,iBAAmC;AAAA,UAAhCG,aAAgC,SAAhCA,aAAgC;AAC5D,OAAC,MAAKC,eAAN,IAAyB,MAAKF,KAAL,CAAWG,eAApC,IAAuDF,aAAa,CAACE,eAAd,EAAvD;AACA,UAAMnB,GAAG,GAAGF,EAAE,EAAd;;AAEA,UAAImB,aAAa,CAACG,OAAd,IAAyBH,aAAa,CAACG,OAAd,CAAsBC,MAAtB,GAA+B,CAA5D,EAA+D;AAC7D,cAAKQ,OAAL,GAAe,KAAf;AACA;AACD;;AAED,UAAI,MAAKC,KAAL,CAAWC,MAAf,EAAuB;AACrB,YAAI/B,GAAG,GAAG,MAAK8B,KAAL,CAAWhC,EAAjB,IAAuB,GAA3B,EAAgC;AAC9B;AACA,gBAAKgB,IAAL;AACD,SAHD,MAGO;AACL;AACA,cAAMD,OAAO,GAAGW,MAAM,CAACC,UAAP,CAAkB,MAAKX,IAAvB,EAA6B,MAAKE,KAAL,CAAWgB,iBAAX,GAA+BhC,GAA/B,GAAqC,MAAK8B,KAAL,CAAWhC,EAA7E,CAAhB;;AACA,cAAMmC,KAAK,GAAG,MAAKC,UAAL,EAAd;;AAEA,cAAID,KAAJ,EAAW;AACTA,YAAAA,KAAK,CAACpB,OAAN,GAAgBA,OAAhB;AACD;AACF;AACF,OAbD,MAaO,IAAI,CAAC,MAAKgB,OAAV,EAAmB;AACxB;AACA,cAAKH,KAAL;;AAEA,YAAMb,QAAO,GAAGW,MAAM,CAACC,UAAP,CAAkB,MAAKX,IAAvB,EAA6B,MAAKE,KAAL,CAAWgB,iBAAxC,CAAhB;;AAEA,YAAI,MAAKE,UAAL,EAAJ,EAAuB;AACrBvB,UAAAA,YAAY,CAAC,MAAKuB,UAAL,GAAkBtB,aAAnB,CAAZ;AACA,gBAAKsB,UAAL,GAAkBrB,OAAlB,GAA4BA,QAA5B;AACD,SAHD,MAGO;AACL,gBAAKA,OAAL,GAAeA,QAAf;AACD;AACF;;AAED,YAAKgB,OAAL,GAAe,KAAf;AACD,KAtGiC;;AAAA,6DA2GH,UAACM,CAAD,EAAuB;AACpD,UAAI,MAAKnB,KAAL,CAAWM,QAAX,KAAwB7B,OAA5B,EAAqC;AAAA,6BACbC,aAAa,CAAC,MAAK0C,SAAN,CADA;AAAA,YAC3BC,GAD2B,kBAC3BA,GAD2B;AAAA,YACtBC,IADsB,kBACtBA,IADsB;;AAEnC,YAAMC,CAAC,GAAG5C,MAAM,CAACwC,CAAD,CAAN,GAAYG,IAAtB;AACA,YAAME,CAAC,GAAG5C,MAAM,CAACuC,CAAD,CAAN,GAAYE,GAAtB;AACA,YAAMI,GAAG,GAAG,SAAS1C,IAAI,CAACC,GAAL,GAAW0C,QAAX,EAArB;;AAEA,cAAKC,QAAL,CAAc,UAACb,KAAD,EAAyC;AACrD,iBAAO;AACLc,YAAAA,MAAM,oBACDd,KAAK,CAACc,MADL,sBAEHH,GAFG,EAEG;AACLF,cAAAA,CAAC,EAADA,CADK;AAELC,cAAAA,CAAC,EAADA;AAFK,aAFH;AADD,WAAP;AASD,SAVD;;AAYA,cAAKK,YAAL,GAAoBrB,MAAM,CAACC,UAAP,CAAkB,YAAM;AAC1C,gBAAKkB,QAAL,CAAc,UAACb,KAAD,EAAyC;AACrD,gBAAIc,MAAM,qBAAQd,KAAK,CAACc,MAAd,CAAV;;AACA,mBAAOA,MAAM,CAACH,GAAD,CAAb;AACA,mBAAO;AAAEG,cAAAA,MAAM,EAANA;AAAF,aAAP;AACD,WAJD;AAKD,SANmB,EAMjB,GANiB,CAApB;AAOD;AACF,KAtIiC;;AAAA,4DA2IZ,YAAM;AAC1B,UAAI,CAAC,MAAKd,KAAL,CAAWC,MAAhB,EAAwB;AACtB,cAAKY,QAAL,CAAc;AACZZ,UAAAA,MAAM,EAAE,IADI;AAEZjC,UAAAA,EAAE,EAAEA,EAAE;AAFM,SAAd;AAID;;AACDM,MAAAA,wBAAwB,CAAC,MAAKK,EAAN,CAAxB;AACD,KAnJiC;;AAAA,2DAwJb,YAAM;AACzB,UAAI,MAAKqB,KAAL,CAAWC,MAAf,EAAuB;AACrB,cAAKY,QAAL,CAAc;AACZZ,UAAAA,MAAM,EAAE,KADI;AAEZjC,UAAAA,EAAE,EAAE;AAFQ,SAAd;AAID;;AACD,UAAI,MAAKoC,UAAL,EAAJ,EAAuB;AACrBvB,QAAAA,YAAY,CAAC,MAAKuB,UAAL,GAAkBtB,aAAnB,CAAZ;AACA,eAAOT,OAAO,CAAC,MAAKM,EAAN,CAAd;AACD;AACF,KAnKiC;;AAAA,iEAwKT,YAAM;AAC7B,aAAON,OAAO,CAAC,MAAKM,EAAN,CAAd;AACD,KA1KiC;;AAAA,6DA+KJ,UAAC2B,SAAD,EAA4B;AACxD,YAAKA,SAAL,GAAiBA,SAAjB;AAEA,UAAMU,UAAU,GAAG,MAAK9B,KAAL,CAAW8B,UAA9B;;AACA,UAAIA,UAAJ,EAAgB;AACd,YAAI,OAAOA,UAAP,KAAsB,UAA1B,EAAsC;AACpCA,UAAAA,UAAU,CAACV,SAAD,CAAV;AACD,SAFD,MAEO;AACLU,UAAAA,UAAU,CAACC,OAAX,GAAqBX,SAArB;AACD;AACF;AACF,KA1LiC;;AAEhC,UAAK3B,EAAL,GAAUuC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,EAAgCR,QAAhC,CAAyC,EAAzC,CAAV;AACA,UAAKZ,KAAL,GAAa;AACXc,MAAAA,MAAM,EAAE,EADG;AAEXb,MAAAA,MAAM,EAAE,KAFG;AAGXjC,MAAAA,EAAE,EAAE;AAHO,KAAb;AAKA,UAAK+B,OAAL,GAAe,KAAf;AARgC;AASjC;;;;2CAmLsB;AACrB,UAAI1B,OAAO,CAAC,KAAKM,EAAN,CAAX,EAAsB;AACpBE,QAAAA,YAAY,CAACR,OAAO,CAAC,KAAKM,EAAN,CAAP,CAAiBI,OAAlB,CAAZ;AACAF,QAAAA,YAAY,CAACR,OAAO,CAAC,KAAKM,EAAN,CAAP,CAAiBG,aAAlB,CAAZ;AAEA,eAAOT,OAAO,CAAC,KAAKM,EAAN,CAAd;AACD;;AAEDE,MAAAA,YAAY,CAAC,KAAKkC,YAAN,CAAZ;AACD;;;6BAEQ;AAAA;;AAAA,wBACoB,KAAKf,KADzB;AAAA,UACCc,MADD,eACCA,MADD;AAAA,UACSb,MADT,eACSA,MADT;;AAAA,wBAGmD,KAAKf,KAHxD;AAAA,UAECmC,QAFD,eAECA,QAFD;AAAA,UAEWC,SAFX,eAEWA,SAFX;AAAA,UAEsBhE,SAFtB,eAEsBA,SAFtB;AAAA,UAEiC4C,iBAFjC,eAEiCA,iBAFjC;AAAA,UAGLb,eAHK,eAGLA,eAHK;AAAA,UAGY2B,UAHZ,eAGYA,UAHZ;AAAA,UAGwBxB,QAHxB,eAGwBA,QAHxB;AAAA,UAGqC+B,SAHrC;;AAKP,UAAMC,OAAO,GAAG/D,UAAU,CAACC,YAAY,CAAC,UAAD,EAAa8B,QAAb,CAAb,EAAqC8B,SAArC,EAAgD;AACxE,4BAAoBrB,MADoD;AAExE,8BAAsB,CAACA;AAFiD,OAAhD,CAA1B;AAKA,UAAMwB,aAAa,GAAG,CAACF,SAAS,CAACG,QAAX,GAAsBnE,KAAtB,GAA8BD,SAApD;AACA,UAAI4B,KAAyB,GAAG,EAAhC;;AACA,UAAI,CAACqC,SAAS,CAACG,QAAf,EAAyB;AACvBxC,QAAAA,KAAK,CAAC5B,SAAN,GAAkBA,SAAlB;AACA;;AACA4B,QAAAA,KAAK,CAACyC,OAAN,GAAgB,KAAKA,OAArB;AACAzC,QAAAA,KAAK,CAAC0C,MAAN,GAAe,KAAKA,MAApB;AACA1C,QAAAA,KAAK,CAAC2C,KAAN,GAAc,KAAKA,KAAnB;AACA;;AACA3C,QAAAA,KAAK,CAAC8B,UAAN,GAAmB,KAAKc,MAAxB;AACD,OARD,MAQO;AACL5C,QAAAA,KAAK,CAAC6C,GAAN,GAAY,KAAKD,MAAjB;AACD;;AAED,0BACE,oBAAC,gBAAD,CAAkB,QAAlB,QACG,UAAC1C,eAAD,EAA8B;AAC7B,QAAA,MAAI,CAACA,eAAL,GAAuBA,eAAvB;AAEA,4BACE,oBAAC,aAAD,eAAmBmC,SAAnB;AAA8B,UAAA,SAAS,EAAEC;AAAzC,WAAsDtC,KAAtD,GACGM,QAAQ,KAAK7B,OAAb,iBACD;AAAM,UAAA,SAAS,EAAC;AAAhB,WACGa,MAAM,CAACC,IAAP,CAAYqC,MAAZ,EAAoBkB,GAApB,CAAwB,UAACC,CAAD,EAAe;AACtC,8BACE;AAAM,YAAA,SAAS,EAAC,gBAAhB;AAAiC,YAAA,KAAK,EAAE;AAAE1B,cAAAA,GAAG,EAAEO,MAAM,CAACmB,CAAD,CAAN,CAAUvB,CAAjB;AAAoBF,cAAAA,IAAI,EAAEM,MAAM,CAACmB,CAAD,CAAN,CAAUxB;AAApC,aAAxC;AAAiF,YAAA,GAAG,EAAEwB;AAAtF,YADF;AAGD,SAJA,CADH,CAFF,EAUGZ,QAVH,CADF;AAcD,OAlBH,CADF;AAsBD;;;;EAtPoB/D,S;;gBAAjB2B,Q,kBAwBiC;AACnC3B,EAAAA,SAAS,EAAE,KADwB;AAEnC4E,EAAAA,IAAI,EAAE,QAF6B;AAGnC7C,EAAAA,eAAe,EAAE,KAHkB;AAInCqC,EAAAA,QAAQ,EAAE,KAJyB;AAKnCxB,EAAAA,iBAAiB,EAAE9B;AALgB,C;;AAiOvC,eAAeL,YAAY,CAACkB,QAAD,CAA3B","sourcesContent":["import React, { Component, ElementType, HTMLAttributes } from 'react';\nimport Touch, { TouchEvent, TouchEventHandler, TouchProps } from '../Touch/Touch';\nimport TouchRootContext from '../Touch/TouchContext';\nimport classNames from '../../lib/classNames';\nimport getClassName from '../../helpers/getClassName';\nimport { ANDROID } from '../../lib/platform';\nimport { getOffsetRect } from '../../lib/offset';\nimport { coordX, coordY, VKUITouchEvent, VKUITouchEventHander } from '../../lib/touch';\nimport { HasPlatform, HasRootRef, OldRef, RefWithCurrent } from '../../types';\nimport withPlatform from '../../hoc/withPlatform';\n\nexport interface TappableProps extends HTMLAttributes<HTMLElement>, HasRootRef<HTMLElement>, HasPlatform {\n  Component?: ElementType;\n  activeEffectDelay?: number;\n  disabled?: boolean;\n  stopPropagation?: boolean;\n  href?: string;\n  target?: string;\n}\n\nexport interface TappableState {\n  clicks?: {\n    [index: string]: {\n      x: number;\n      y: number;\n    };\n  };\n  active?: boolean;\n  ts?: number;\n}\n\nexport interface RootComponentProps extends TouchProps {\n  ref?: OldRef<HTMLElement> | RefWithCurrent<HTMLElement>;\n}\n\nexport interface StorageItem {\n  activeTimeout: number;\n  timeout?: number;\n  stop(): void;\n}\n\nexport interface Storage {\n  [index: string]: StorageItem;\n}\n\nexport type GetStorage = () => StorageItem;\n\nconst ts = () => +Date.now();\n\nexport const ACTIVE_DELAY = 70;\nexport const ACTIVE_EFFECT_DELAY = 600;\n\nlet storage: Storage = {};\n\n/*\n * Очищает таймауты и хранилище для всех экземпляров компонента, кроме переданного\n */\nfunction deactivateOtherInstances(exclude?: string) {\n  Object.keys(storage).filter((id: string) => id !== exclude).forEach((id: string) => {\n    clearTimeout(storage[id].activeTimeout);\n    clearTimeout(storage[id].timeout);\n    storage[id].stop();\n\n    delete storage[id];\n  });\n}\n\nclass Tappable extends Component<TappableProps, TappableState> {\n  constructor(props: TappableProps) {\n    super(props);\n    this.id = Math.round(Math.random() * 1e8).toString(16);\n    this.state = {\n      clicks: {},\n      active: false,\n      ts: null,\n    };\n    this.isSlide = false;\n  }\n\n  id: string;\n\n  isSlide: boolean;\n\n  insideTouchRoot: boolean;\n\n  container: HTMLElement;\n\n  timeout: number;\n\n  wavesTimeout: number;\n\n  static defaultProps: TappableProps = {\n    Component: 'div',\n    role: 'button',\n    stopPropagation: false,\n    disabled: false,\n    activeEffectDelay: ACTIVE_EFFECT_DELAY,\n  };\n\n  /*\n   * Обрабатывает событие touchstart\n   */\n  onStart: TouchEventHandler = ({ originalEvent }: TouchEvent) => {\n    !this.insideTouchRoot && this.props.stopPropagation && originalEvent.stopPropagation();\n    if (originalEvent.touches && originalEvent.touches.length > 1) {\n      deactivateOtherInstances();\n      return;\n    }\n\n    if (this.props.platform === ANDROID) {\n      this.onDown(originalEvent);\n    }\n\n    storage[this.id] = {\n      stop: this.stop,\n      activeTimeout: window.setTimeout(this.start, ACTIVE_DELAY),\n    };\n  };\n\n  /*\n   * Обрабатывает событие touchmove\n   */\n  onMove: TouchEventHandler = ({ originalEvent, shiftXAbs, shiftYAbs }: TouchEvent) => {\n    !this.insideTouchRoot && this.props.stopPropagation && originalEvent.stopPropagation();\n    if (shiftXAbs > 20 || shiftYAbs > 20) {\n      this.isSlide = true;\n      this.stop();\n    }\n  };\n\n  /*\n   * Обрабатывает событие touchend\n   */\n  onEnd: TouchEventHandler = ({ originalEvent }: TouchEvent) => {\n    !this.insideTouchRoot && this.props.stopPropagation && originalEvent.stopPropagation();\n    const now = ts();\n\n    if (originalEvent.touches && originalEvent.touches.length > 0) {\n      this.isSlide = false;\n      return;\n    }\n\n    if (this.state.active) {\n      if (now - this.state.ts >= 100) {\n        // Долгий тап, выключаем подсветку\n        this.stop();\n      } else {\n        // Короткий тап, оставляем подсветку\n        const timeout = window.setTimeout(this.stop, this.props.activeEffectDelay - now + this.state.ts);\n        const store = this.getStorage();\n\n        if (store) {\n          store.timeout = timeout;\n        }\n      }\n    } else if (!this.isSlide) {\n      // Очень короткий тап, включаем подсветку\n      this.start();\n\n      const timeout = window.setTimeout(this.stop, this.props.activeEffectDelay);\n\n      if (this.getStorage()) {\n        clearTimeout(this.getStorage().activeTimeout);\n        this.getStorage().timeout = timeout;\n      } else {\n        this.timeout = timeout;\n      }\n    }\n\n    this.isSlide = false;\n  };\n\n  /*\n   * Реализует эффект при тапе для Андроида\n   */\n  onDown: VKUITouchEventHander = (e: VKUITouchEvent) => {\n    if (this.props.platform === ANDROID) {\n      const { top, left } = getOffsetRect(this.container);\n      const x = coordX(e) - left;\n      const y = coordY(e) - top;\n      const key = 'wave' + Date.now().toString();\n\n      this.setState((state: TappableState): TappableState => {\n        return {\n          clicks: {\n            ...state.clicks,\n            [key]: {\n              x,\n              y,\n            },\n          },\n        };\n      });\n\n      this.wavesTimeout = window.setTimeout(() => {\n        this.setState((state: TappableState): TappableState => {\n          let clicks = { ...state.clicks };\n          delete clicks[key];\n          return { clicks };\n        });\n      }, 225);\n    }\n  };\n\n  /*\n   * Устанавливает активное выделение\n   */\n  start: VoidFunction = () => {\n    if (!this.state.active) {\n      this.setState({\n        active: true,\n        ts: ts(),\n      });\n    }\n    deactivateOtherInstances(this.id);\n  };\n\n  /*\n   * Снимает активное выделение\n   */\n  stop: VoidFunction = () => {\n    if (this.state.active) {\n      this.setState({\n        active: false,\n        ts: null,\n      });\n    }\n    if (this.getStorage()) {\n      clearTimeout(this.getStorage().activeTimeout);\n      delete storage[this.id];\n    }\n  };\n\n  /*\n   * Возвращает хранилище для экземпляра компонента\n   */\n  getStorage: GetStorage = () => {\n    return storage[this.id];\n  };\n\n  /*\n   * Берет ref на DOM-ноду из экземпляра Touch\n   */\n  getRef: OldRef<HTMLElement> = (container: HTMLElement) => {\n    this.container = container;\n\n    const getRootRef = this.props.getRootRef;\n    if (getRootRef) {\n      if (typeof getRootRef === 'function') {\n        getRootRef(container);\n      } else {\n        getRootRef.current = container;\n      }\n    }\n  };\n\n  componentWillUnmount() {\n    if (storage[this.id]) {\n      clearTimeout(storage[this.id].timeout);\n      clearTimeout(storage[this.id].activeTimeout);\n\n      delete storage[this.id];\n    }\n\n    clearTimeout(this.wavesTimeout);\n  }\n\n  render() {\n    const { clicks, active } = this.state;\n    const { children, className, Component, activeEffectDelay,\n      stopPropagation, getRootRef, platform, ...restProps } = this.props;\n\n    const classes = classNames(getClassName('Tappable', platform), className, {\n      'Tappable--active': active,\n      'Tappable--inactive': !active,\n    });\n\n    const RootComponent = !restProps.disabled ? Touch : Component;\n    let props: RootComponentProps = {};\n    if (!restProps.disabled) {\n      props.Component = Component;\n      /* eslint-disable */\n      props.onStart = this.onStart;\n      props.onMove = this.onMove;\n      props.onEnd = this.onEnd;\n      /* eslint-enable */\n      props.getRootRef = this.getRef;\n    } else {\n      props.ref = this.getRef;\n    }\n\n    return (\n      <TouchRootContext.Consumer>\n        {(insideTouchRoot: boolean) => {\n          this.insideTouchRoot = insideTouchRoot;\n\n          return (\n            <RootComponent {...restProps} className={classes} {...props}>\n              {platform === ANDROID &&\n              <span className=\"Tappable__waves\">\n                {Object.keys(clicks).map((k: string) => {\n                  return (\n                    <span className=\"Tappable__wave\" style={{ top: clicks[k].y, left: clicks[k].x }} key={k} />\n                  );\n                })}\n              </span>\n              }\n              {children}\n            </RootComponent>\n          );\n        }}\n      </TouchRootContext.Consumer>\n    );\n  }\n}\n\nexport default withPlatform(Tappable);\n"],"file":"Tappable.js"}