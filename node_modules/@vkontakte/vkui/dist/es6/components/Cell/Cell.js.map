{"version":3,"sources":["../../../../src/components/Cell/Cell.tsx"],"names":["React","Component","PropTypes","classNames","getClassName","Tappable","Touch","ANDROID","IOS","Icon24Chevron","Icon16Done","Icon24Cancel","Icon24Reorder","Icon24ReorderIos","withPlatform","Cell","props","e","removable","onClick","target","tagName","toLowerCase","stopPropagation","setState","isRemoveActivated","document","addEventListener","deactivateRemove","removeOffset","removeEventListener","nativeEvent","stopImmediatePropagation","preventDefault","onRemove","rootEl","el","removeButton","element","getRootRef","current","dragging","dragShift","listEl","closest","classList","add","siblings","Array","prototype","slice","call","parentElement","childNodes","dragStartIndex","indexOf","originalEvent","state","style","transform","shiftY","rootGesture","getBoundingClientRect","dragDirection","dragEndIndex","forEach","sibling","siblingIndex","siblingGesture","bottom","top","height","remove","onDragFinish","from","to","_prevProps","prevState","offsetWidth","before","indicator","asideContent","expandable","children","description","selectable","multiline","className","removePlaceholder","draggable","href","size","bottomContent","platform","onChange","restProps","rootProps","inputProps","linkProps","IS_PLATFORM_ANDROID","IS_PLATFORM_IOS","activateRemove","onDragStart","onDragMove","onDragEnd","onRemoveClick","getRemoveRef","context","any"],"mappings":"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","sourcesContent":["import React, { Component, InputHTMLAttributes, ReactNode, MouseEvent } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from '../../lib/classNames';\nimport getClassName from '../../helpers/getClassName';\nimport Tappable from '../Tappable/Tappable';\nimport Touch, { TouchEvent } from '../Touch/Touch';\nimport { ANDROID, IOS } from '../../lib/platform';\nimport Icon24Chevron from '@vkontakte/icons/dist/24/chevron';\nimport Icon16Done from '@vkontakte/icons/dist/16/done';\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\nimport Icon24Reorder from '@vkontakte/icons/dist/24/reorder';\nimport Icon24ReorderIos from '@vkontakte/icons/dist/24/reorder_ios';\nimport { HasChildren, HasPlatform, HasRootRef } from '../../types';\nimport withPlatform from '../../hoc/withPlatform';\n\ntype ProxyInputHTMLAttributes = Omit<InputHTMLAttributes<HTMLElement>, 'size'>;\n\nexport interface CellProps extends ProxyInputHTMLAttributes, HasChildren, HasRootRef<HTMLElement>, HasPlatform {\n  /**\n   * Контейнер для контента от `children`.\n   */\n  before?: ReactNode;\n  /**\n   * Контейнер для текста справа от `children`.\n   */\n  indicator?: ReactNode;\n  /**\n   * Контейнер для контента справа от `children` и `indicator`.\n   */\n  asideContent?: ReactNode;\n  /**\n   * Выставляйте этот флаг, если клик по ячейке вызывает переход на другую панель. Флаг нужен для корректной\n   * стилизации такой ячейки.\n   */\n  expandable?: boolean;\n  /**\n   * Добавляет возможность переноса содержимого `children` и `description`. Без этого флага текст будет уходить\n   * в троеточие.\n   */\n  multiline?: boolean;\n  /**\n   * Контейнер для дополнительного содержимого под `children`.\n   */\n  description?: ReactNode;\n  /**\n   * Контейнер для произвольного содержимого под `description`. Рисуется только если передать `size=\"l\"`.\n   */\n  bottomContent?: ReactNode;\n  /**\n   * Размер влияет на выравнивание блоков по вертикали, вид сепаратора (iOS) и возможность вставлять `bottomContent`.\n   */\n  size?: 'm' | 'l';\n  /**\n   * Флаг для перехода в режим ячеек-чекбоксов.\n   * **Важно:** в этом режиме обработчик `onClick` вызываться не будет.\n   * **Важно:** этот режим несовместим с `draggable`. В случае истинности двух этих флагов, приоритет отдается\n   * `draggable`.\n   */\n  selectable?: boolean;\n  /**\n   * Флаг для перехода в режим удаляемых ячеек. **Важно:** в этом режиме обработчик `onClick` вызываться не будет.\n   */\n  removable?: boolean;\n  /**\n   * Коллбэк срабатывает при клике на контрол удаления.\n   */\n  onRemove?(e: MouseEvent, rootEl: HTMLElement): void;\n  /**\n   * iOS only. Текст в выезжаеющей кнопке для удаления ячейки.\n   */\n  removePlaceholder?: ReactNode;\n  /**\n   * Флаг для перехода в режим перетаскивания. **Важно:** в этом режиме обработчик `onClick` вызываться не будет.\n   */\n  draggable?: boolean;\n  /**\n   * Коллбэк срабатывает при завершении перетаскивания.\n   * **Важно:** режим перетаскивания не меняет порядок ячеек в DOM. В коллбэке есть объект с полями `from` и `to`.\n   * Эти числа нужны для того, чтобы разработчик понимал, с какого индекса на какой произошел переход. В песочнице\n   * есть рабочий пример с обработкой этих чисел и перерисовкой списка.\n   */\n  onDragFinish?({ from, to }: { from: number; to: number }): void;\n  href?: string;\n  target?: string;\n}\n\nexport interface CellState {\n  isRemoveActivated: boolean;\n  removeOffset: number;\n  dragging: boolean;\n}\n\nclass Cell extends Component<CellProps, CellState> {\n  constructor(props: CellProps) {\n    super(props);\n\n    this.state = {\n      isRemoveActivated: false,\n      removeOffset: 0,\n      dragging: false,\n    };\n  }\n\n  rootEl: HTMLElement;\n  removeButton: HTMLDivElement;\n\n  static defaultProps = {\n    indicator: '',\n    asideContent: '',\n    expandable: false,\n    children: '',\n    selectable: false,\n    multiline: false,\n    removable: false,\n    size: 'm',\n    removePlaceholder: 'Удалить',\n  };\n\n  static contextTypes = {\n    document: PropTypes.any,\n  };\n\n  get document() {return this.context.document || document;}\n\n  /*\n   * предотвращает двойное срабатывание в случае с input\n   * (https://github.com/vuejs/vue/issues/3699#issuecomment-247957931)\n   * предотвращает клик в случае, когда включен режим removable\n   */\n  private readonly onClick = (e: MouseEvent<HTMLElement>): void => {\n    const { removable, onClick } = this.props;\n    const target = e.target as HTMLElement;\n    if (target.tagName.toLowerCase() === 'input') {\n      e.stopPropagation();\n    } else if (removable) {\n      return null;\n    } else {\n      onClick && onClick(e);\n    }\n  };\n\n  activateRemove = () => {\n    this.setState({ isRemoveActivated: true });\n    this.document.addEventListener('click', this.deactivateRemove);\n  };\n\n  deactivateRemove = () => {\n    this.setState({ isRemoveActivated: false, removeOffset: 0 });\n    this.document.removeEventListener('click', this.deactivateRemove);\n  };\n\n  private readonly onRemoveClick = (e: MouseEvent) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.preventDefault();\n    this.props.onRemove && this.props.onRemove(e, this.rootEl);\n  };\n\n  componentWillUnmount() {\n    this.document.removeEventListener('click', this.deactivateRemove);\n  }\n\n  componentDidUpdate(_prevProps: CellProps, prevState: CellState) {\n    if (prevState.isRemoveActivated !== this.state.isRemoveActivated && this.state.isRemoveActivated) {\n      this.setState({ removeOffset: this.removeButton.offsetWidth });\n    }\n  }\n\n  getRemoveRef = (el: HTMLDivElement) => this.removeButton = el;\n\n  getRootRef = (element: HTMLElement) => {\n    this.rootEl = element;\n\n    const getRootRef = this.props.getRootRef;\n    if (getRootRef) {\n      if (typeof getRootRef === 'function') {\n        getRootRef(element);\n      } else {\n        getRootRef.current = element;\n      }\n    }\n  };\n\n  dragShift: number;\n  listEl: HTMLElement;\n  siblings: HTMLElement[];\n  dragStartIndex: number;\n  dragEndIndex: number;\n  dragDirection: 'down' | 'up';\n\n  onDragStart = () => {\n    this.setState({ dragging: true });\n    this.dragShift = 0;\n    this.listEl = this.rootEl.closest('.List');\n    this.listEl && this.listEl.classList.add('List--dragging');\n    this.siblings = Array.prototype.slice.call(this.rootEl.parentElement.childNodes);\n    this.dragStartIndex = this.siblings.indexOf(this.rootEl);\n  };\n\n  onDragMove = (e: TouchEvent) => {\n    e.originalEvent.preventDefault();\n    if (this.state.removeOffset) {\n      return;\n    }\n\n    this.rootEl.style.transform = `translateY(${e.shiftY}px)`;\n    const rootGesture = this.rootEl.getBoundingClientRect();\n    this.dragDirection = this.dragShift - e.shiftY < 0 ? 'down' : 'up';\n    this.dragShift = e.shiftY;\n    this.dragEndIndex = this.dragStartIndex;\n\n    this.siblings.forEach((sibling, siblingIndex) => {\n      const siblingGesture = sibling.getBoundingClientRect();\n      if (this.dragStartIndex < siblingIndex) {\n        if (rootGesture.bottom > siblingGesture.top + siblingGesture.height / 2) {\n          if (this.dragDirection === 'down') {\n            sibling.style.transform = 'translateY(-100%)';\n          }\n          this.dragEndIndex++;\n        }\n        if (rootGesture.top < siblingGesture.bottom - siblingGesture.height / 2 && this.dragDirection === 'up') {\n          sibling.style.transform = 'translateY(0)';\n        }\n      } else if (this.dragStartIndex > siblingIndex) {\n        if (rootGesture.top < siblingGesture.bottom - siblingGesture.height / 2) {\n          if (this.dragDirection === 'up') {\n            sibling.style.transform = 'translateY(100%)';\n          }\n          this.dragEndIndex--;\n        }\n        if (rootGesture.bottom > siblingGesture.top + siblingGesture.height / 2 && this.dragDirection === 'down') {\n          sibling.style.transform = 'translateY(0)';\n        }\n      }\n    });\n  };\n\n  onDragEnd = () => {\n    this.setState({ dragging: false });\n    this.listEl && this.listEl.classList.remove('List--dragging');\n    this.props.onDragFinish && this.props.onDragFinish({ from: this.dragStartIndex, to: this.dragEndIndex });\n    this.siblings.forEach((sibling) => sibling.style.transform = null);\n    delete this.dragShift;\n    delete this.listEl;\n    delete this.siblings;\n    delete this.dragStartIndex;\n    delete this.dragEndIndex;\n    delete this.dragDirection;\n  };\n\n  render() {\n    let {\n      before,\n      indicator,\n      asideContent,\n      expandable,\n      onClick,\n      children,\n      getRootRef,\n      description,\n      selectable,\n      multiline,\n      className,\n      onRemove,\n      removable,\n      removePlaceholder,\n      draggable,\n      onDragFinish,\n      href,\n      size,\n      bottomContent,\n      platform,\n      onChange,\n      ...restProps\n    } = this.props;\n\n    selectable = selectable && !draggable;\n\n    const rootProps = selectable ? {} : restProps;\n    const inputProps = selectable ? { ...restProps, onChange } : {};\n    const linkProps = href ? restProps : {};\n    const IS_PLATFORM_ANDROID = platform === ANDROID;\n    const IS_PLATFORM_IOS = platform === IOS;\n\n    return (\n      <div\n        {...rootProps}\n        onClick={href || draggable ? null : this.onClick}\n        className={classNames(getClassName('Cell', platform), {\n          'Cell--expandable': expandable,\n          'Cell--multiline': multiline,\n          'Cell--dragging': this.state.dragging,\n          'Cell--draggable': draggable,\n        }, `Cell--${size}`, className)}\n        ref={this.getRootRef}\n      >\n        <Tappable\n          {...linkProps}\n          onClick={href ? this.onClick : null}\n          Component={selectable ? 'label' : href ? 'a' : 'div'}\n          className=\"Cell__in\"\n          href={href}\n          disabled={(!selectable && !onClick && !href || removable || draggable)}\n          style={removable ? { transform: `translateX(-${this.state.removeOffset}px)` } : null}\n        >\n          {selectable && <input {...inputProps} type=\"checkbox\" className=\"Cell__checkbox\" />}\n          <div className=\"Cell__before\">\n            {selectable && IS_PLATFORM_IOS && <div className=\"Cell__checkbox-marker\"><Icon16Done /></div>}\n            {removable && IS_PLATFORM_IOS && <div className=\"Cell__remove-marker\" onClick={this.activateRemove} />}\n            {IS_PLATFORM_ANDROID && draggable &&\n            <Touch\n              onStart={this.onDragStart}\n              onMoveY={this.onDragMove}\n              onEnd={this.onDragEnd}\n              className=\"Cell__dragger\"\n            ><Icon24Reorder /></Touch>\n            }\n            {before && <div className=\"Cell__before-in\">{before}</div>}\n          </div>\n          <div className=\"Cell__main\">\n            <div className=\"Cell__children\">{children}</div>\n            {description && <div className=\"Cell__description\">{description}</div>}\n            {size === 'l' && bottomContent && <div className=\"Cell__bottom\">{bottomContent}</div>}\n          </div>\n          <div className=\"Cell__indicator\">{indicator}</div>\n          <div className=\"Cell__aside\">\n            {asideContent}\n            {selectable && IS_PLATFORM_ANDROID && <div className=\"Cell__checkbox-marker\"><Icon16Done /></div>}\n            {removable && IS_PLATFORM_ANDROID &&\n            <div className=\"Cell__remove-marker\" onClick={this.onRemoveClick}><Icon24Cancel /></div>\n            }\n            {IS_PLATFORM_IOS && expandable && !draggable && <Icon24Chevron className=\"Cell__chevron\" />}\n            {IS_PLATFORM_IOS && draggable &&\n            <Touch\n              className=\"Cell__dragger\"\n              onStart={this.onDragStart}\n              onMoveY={this.onDragMove}\n              onEnd={this.onDragEnd}\n            ><Icon24ReorderIos /></Touch>\n            }\n          </div>\n        </Tappable>\n        {removable && IS_PLATFORM_IOS &&\n        <div\n          ref={this.getRemoveRef}\n          className=\"Cell__remove\"\n          onClick={this.onRemoveClick}\n          style={removable ? { transform: `translateX(-${this.state.removeOffset}px)` } : null}\n        >\n          <span className=\"Cell__remove-in\">{removePlaceholder}</span>\n        </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default withPlatform(Cell);\n"],"file":"Cell.js"}