{"version":3,"sources":["../../../../src/components/ModalCard/ModalCard.tsx"],"names":["React","Component","Button","PanelHeaderButton","getClassName","classNames","withInsets","Icon24Dismiss","IOS","isNumeric","withPlatform","ModalCard","event","target","currentTarget","action","props","actions","Number","dataset","index","persist","insets","icon","header","caption","children","actionsLayout","onClose","platform","bottom","marginBottom","length","map","i","title","mode","onButtonClick"],"mappings":"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","sourcesContent":["import React, { Component, HTMLAttributes, MouseEventHandler, ReactNode, MouseEvent } from 'react';\nimport Button from '../Button/Button';\nimport PanelHeaderButton from '../PanelHeaderButton/PanelHeaderButton';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport withInsets from '../../hoc/withInsets';\nimport Icon24Dismiss from '@vkontakte/icons/dist/24/dismiss';\nimport { IOS } from '../../lib/platform';\nimport { isNumeric } from '../../lib/utils';\nimport withPlatform from '../../hoc/withPlatform';\nimport { HasChildren, HasInsets, HasPlatform } from '../../types';\n\nexport interface ModalCardActionInterface {\n  title: string;\n  action?(event: MouseEvent): void;\n  mode?: 'secondary' | 'primary';\n}\n\nexport interface ModalCardProps extends HTMLAttributes<HTMLElement>, HasPlatform, HasChildren, HasInsets {\n  /**\n   * Иконка.\n   *\n   * Может быть компонентом иконки, например, `<Icon56MoneyTransferOutline />`, или `<Avatar size={72} src=\"\" />`\n   */\n  icon?: ReactNode;\n\n  /**\n   * Заголовок карточки\n   */\n  header?: string;\n\n  /**\n   * Текст, поясняющий заголовок\n   */\n  caption?: string;\n\n  /**\n   * Список кнопок-действий\n   */\n  actions?: ModalCardActionInterface[];\n\n  /**\n   * Тип отображения кнопок: вертикальный или горизонтальный\n   */\n  actionsLayout?: 'vertical' | 'horizontal';\n\n  /**\n   * Будет вызван при закрытии карточки жестом\n   */\n  onClose?(): void;\n}\n\nclass ModalCard extends Component<ModalCardProps> {\n  static defaultProps: ModalCardProps = {\n    actions: [],\n    actionsLayout: 'horizontal',\n    insets: {},\n  };\n\n  onButtonClick: MouseEventHandler = (event: MouseEvent) => {\n    const target = event.currentTarget as HTMLButtonElement;\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const action = this.props.actions[Number(target.dataset.index)].action;\n    event.persist();\n\n    if (typeof action === 'function') {\n      action(event);\n    }\n  };\n\n  render() {\n    const { insets, icon, header, caption, children, actions, actionsLayout, onClose, platform } = this.props;\n\n    return (\n      <div className={classNames(getClassName('ModalCard', platform))}>\n        <div className=\"ModalCard__in\">\n          <div className=\"ModalCard__container\" style={isNumeric(insets.bottom) ? { marginBottom: insets.bottom } : null}>\n            {icon && <div className=\"ModalCard__icon\">{icon}</div>}\n            {header && <div className=\"ModalCard__title\">{header}</div>}\n            {caption && <div className=\"ModalCard__caption\">{caption}</div>}\n\n            {children}\n\n            {actions.length > 0 &&\n            <div className={classNames('ModalCard__actions', {\n              'ModalCard__actions--v': actionsLayout === 'vertical',\n            })}>\n              {actions.map(({ title, mode }: ModalCardActionInterface, i: number) => {\n                return (\n                  <Button\n                    key={i}\n                    data-index={i}\n                    size=\"xl\"\n                    mode={mode}\n                    onClick={this.onButtonClick}\n                  >\n                    {title}\n                  </Button>\n                );\n              })}\n            </div>\n            }\n\n            {platform === IOS &&\n            <PanelHeaderButton className=\"ModalCard__dismiss\" onClick={onClose}>\n              <Icon24Dismiss />\n            </PanelHeaderButton>}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withPlatform(withInsets(ModalCard));\n"],"file":"ModalCard.js"}