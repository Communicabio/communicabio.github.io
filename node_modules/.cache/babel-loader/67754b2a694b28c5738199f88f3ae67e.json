{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React, { Component } from 'react';\nimport classNames from '../../lib/classNames';\nimport withPlatform from '../../hoc/withPlatform';\nimport getClassname from '../../helpers/getClassName';\nimport Icon16SearchOutline from '@vkontakte/icons/dist/16/search_outline';\nimport Icon16Clear from '@vkontakte/icons/dist/16/clear';\nimport { IOS } from '../../lib/platform';\nimport Touch from '../Touch/Touch';\nvar searchId = 0;\n\nvar Search = /*#__PURE__*/function (_Component) {\n  _inherits(Search, _Component);\n\n  var _super = _createSuper(Search);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"isControlledOutside\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"inputEl\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"searchId\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"onFocus\", function (e) {\n      _this.setState({\n        focused: true\n      });\n\n      _this.props.onFocus && _this.props.onFocus(e);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBlur\", function (e) {\n      _this.setState({\n        focused: false\n      });\n\n      _this.props.onBlur && _this.props.onBlur(e);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (e) {\n      var target = e.target;\n\n      if (!_this.isControlledOutside) {\n        _this.setState({\n          value: target.value\n        });\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", function () {\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      var nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value').set;\n      nativeInputValueSetter.call(_this.inputEl, '');\n      var ev2 = new Event('input', {\n        bubbles: true\n      });\n\n      _this.inputEl.dispatchEvent(ev2);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onIconClickStart\", function (e) {\n      _this.props.onIconClick && _this.props.onIconClick(e.originalEvent);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onIconCancelClickStart\", function (e) {\n      e.originalEvent.preventDefault();\n\n      _this.inputEl.focus();\n\n      _this.onCancel();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"inputRef\", function (element) {\n      var getRef = _this.props.getRef;\n      _this.inputEl = element;\n\n      if (getRef) {\n        if (typeof getRef === 'function') {\n          getRef(element);\n        } else {\n          getRef.current = element;\n        }\n      }\n    });\n\n    var state = {\n      focused: false\n    };\n\n    if (props.hasOwnProperty('value')) {\n      _this.isControlledOutside = true;\n    } else {\n      state.value = props.defaultValue || '';\n    }\n\n    _this.searchId = \"search-\".concat(searchId++);\n    _this.state = state;\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          className = _this$props.className,\n          onFocus = _this$props.onFocus,\n          onBlur = _this$props.onBlur,\n          onChange = _this$props.onChange,\n          defaultValue = _this$props.defaultValue,\n          value = _this$props.value,\n          placeholder = _this$props.placeholder,\n          after = _this$props.after,\n          getRef = _this$props.getRef,\n          platform = _this$props.platform,\n          icon = _this$props.icon,\n          onIconClick = _this$props.onIconClick,\n          inputProps = _objectWithoutProperties(_this$props, [\"className\", \"onFocus\", \"onBlur\", \"onChange\", \"defaultValue\", \"value\", \"placeholder\", \"after\", \"getRef\", \"platform\", \"icon\", \"onIconClick\"]);\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(getClassname('Search', platform), {\n          'Search--focused': this.state.focused,\n          'Search--has-value': !!this.value,\n          'Search--has-after': !!after,\n          'Search--has-icon': !!icon\n        }, className)\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Search__in\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Search__width\"\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Search__control\"\n      }, /*#__PURE__*/React.createElement(\"input\", _extends({}, inputProps, {\n        ref: this.inputRef,\n        type: \"text\",\n        className: \"Search__input\",\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n        onChange: this.onChange,\n        value: this.value\n      })), platform === IOS && after && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Search__after-width\"\n      }, after), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Search__placeholder\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Search__placeholder-in\"\n      }, /*#__PURE__*/React.createElement(Icon16SearchOutline, null), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Search__placeholder-text\",\n        dangerouslySetInnerHTML: {\n          __html: placeholder\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Search__after\",\n        onClick: this.onCancel\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Search__icons\"\n      }, icon && /*#__PURE__*/React.createElement(Touch, {\n        onStart: this.onIconClickStart,\n        className: \"Search__icon\"\n      }, icon), !!this.value && /*#__PURE__*/React.createElement(Touch, {\n        onStart: this.onIconCancelClickStart,\n        className: \"Search__icon\"\n      }, /*#__PURE__*/React.createElement(Icon16Clear, null))), platform === IOS && after && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Search__after-in\"\n      }, after))));\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.isControlledOutside ? this.props.value : this.state.value;\n    }\n  }]);\n\n  return Search;\n}(Component);\n\n_defineProperty(Search, \"defaultProps\", {\n  autoComplete: 'off',\n  placeholder: 'Поиск',\n  after: 'Отмена'\n});\n\nexport default withPlatform(Search);","map":{"version":3,"sources":["../../../../src/components/Search/Search.tsx"],"names":["searchId","Search","Component","autoComplete","placeholder","after","state","focused","props","target","e","value","nativeInputValueSetter","Object","window","ev2","bubbles","getRef","className","onFocus","onBlur","onChange","defaultValue","platform","icon","onIconClick","inputProps","classNames","getClassname","__html","onCancel","withPlatform"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAA,KAAA,IAAA,SAAA,QAAA,OAAA;AASA,OAAA,UAAA,MAAA,sBAAA;AACA,OAAA,YAAA,MAAA,wBAAA;AACA,OAAA,YAAA,MAAA,4BAAA;AACA,OAAA,mBAAA,MAAA,yCAAA;AACA,OAAA,WAAA,MAAA,gCAAA;AACA,SAAA,GAAA,QAAA,oBAAA;AAEA,OAAA,KAAA,MAAA,gBAAA;AAGA,IAAIA,QAAQ,GAAZ,CAAA;;IAmBMC,M;;;;;AAaJ,WAAA,MAAA,CAAA,KAAA,EAAgC;AAAA,QAAA,KAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,MAAA,CAAA;;AAC9B,IAAA,KAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,KAAA,CAAA;;AAD8B,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,qBAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,SAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,SAAA,EAoBH,UAAA,CAAA,EAAqC;AAChE,MAAA,KAAA,CAAA,QAAA,CAAc;AAAEM,QAAAA,OAAO,EAAE;AAAX,OAAd;;AACA,MAAA,KAAA,CAAA,KAAA,CAAA,OAAA,IAAsB,KAAA,CAAA,KAAA,CAAA,OAAA,CAAtB,CAAsB,CAAtB;AAtB8B,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,QAAA,EAyBJ,UAAA,CAAA,EAAqC;AAC/D,MAAA,KAAA,CAAA,QAAA,CAAc;AAAEA,QAAAA,OAAO,EAAE;AAAX,OAAd;;AACA,MAAA,KAAA,CAAA,KAAA,CAAA,MAAA,IAAqB,KAAA,CAAA,KAAA,CAAA,MAAA,CAArB,CAAqB,CAArB;AA3B8B,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,UAAA,EA8BD,UAAA,CAAA,EAAuC;AACpE,UAAME,MAAM,GAAGC,CAAC,CAAhB,MAAA;;AACA,UAAI,CAAC,KAAA,CAAL,mBAAA,EAA+B;AAC7B,QAAA,KAAA,CAAA,QAAA,CAAc;AAAEC,UAAAA,KAAK,EAAEF,MAAM,CAACE;AAAhB,SAAd;AACD;;AACD,UAAI,KAAA,CAAA,KAAA,CAAJ,QAAA,EAAyB;AACvB,QAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,CAAA;AACD;AArC6B,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,UAAA,EAwCP,YAAM;AAC7B;AACA,UAAMC,sBAAsB,GAAGC,MAAM,CAANA,wBAAAA,CAAgCC,MAAM,CAANA,gBAAAA,CAAhCD,SAAAA,EAAAA,OAAAA,EAA/B,GAAA;AACAD,MAAAA,sBAAsB,CAAtBA,IAAAA,CAA4B,KAAA,CAA5BA,OAAAA,EAAAA,EAAAA;AAEA,UAAMG,GAAG,GAAG,IAAA,KAAA,CAAA,OAAA,EAAmB;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAnB,CAAZ;;AACA,MAAA,KAAA,CAAA,OAAA,CAAA,aAAA,CAAA,GAAA;AA9C8B,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,kBAAA,EAiDM,UAAA,CAAA,EAAmB;AACvD,MAAA,KAAA,CAAA,KAAA,CAAA,WAAA,IAA0B,KAAA,CAAA,KAAA,CAAA,WAAA,CAAuBN,CAAC,CAAlD,aAA0B,CAA1B;AAlD8B,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,wBAAA,EAqDY,UAAA,CAAA,EAAmB;AAC7DA,MAAAA,CAAC,CAADA,aAAAA,CAAAA,cAAAA;;AACA,MAAA,KAAA,CAAA,OAAA,CAAA,KAAA;;AACA,MAAA,KAAA,CAAA,QAAA;AAxD8B,KAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,UAAA,EA2DX,UAAA,OAAA,EAA+B;AAClD,UAAMO,MAAM,GAAG,KAAA,CAAA,KAAA,CAAf,MAAA;AACA,MAAA,KAAA,CAAA,OAAA,GAAA,OAAA;;AACA,UAAA,MAAA,EAAY;AACV,YAAI,OAAA,MAAA,KAAJ,UAAA,EAAkC;AAChCA,UAAAA,MAAM,CAANA,OAAM,CAANA;AADF,SAAA,MAEO;AACLA,UAAAA,MAAM,CAANA,OAAAA,GAAAA,OAAAA;AACD;AACF;AApE6B,KAAA,CAAA;;AAG9B,QAAMX,KAAkB,GAAG;AACzBC,MAAAA,OAAO,EAAE;AADgB,KAA3B;;AAIA,QAAIC,KAAK,CAALA,cAAAA,CAAJ,OAAIA,CAAJ,EAAmC;AACjC,MAAA,KAAA,CAAA,mBAAA,GAAA,IAAA;AADF,KAAA,MAEO;AACLF,MAAAA,KAAK,CAALA,KAAAA,GAAcE,KAAK,CAALA,YAAAA,IAAdF,EAAAA;AACD;;AACD,IAAA,KAAA,CAAA,QAAA,GAAA,UAAA,MAAA,CAA0BN,QAA1B,EAAA,CAAA;AACA,IAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AAb8B,WAAA,KAAA;AAc/B;;;;6BAyDQ;AAAA,UAAA,WAAA,GAeH,KAfG,KAAA;AAAA,UAELkB,SAFK,GAAA,WAAA,CAAA,SAAA;AAAA,UAGLC,OAHK,GAAA,WAAA,CAAA,OAAA;AAAA,UAILC,MAJK,GAAA,WAAA,CAAA,MAAA;AAAA,UAKLC,QALK,GAAA,WAAA,CAAA,QAAA;AAAA,UAMLC,YANK,GAAA,WAAA,CAAA,YAAA;AAAA,UAOLX,KAPK,GAAA,WAAA,CAAA,KAAA;AAAA,UAQLP,WARK,GAAA,WAAA,CAAA,WAAA;AAAA,UASLC,KATK,GAAA,WAAA,CAAA,KAAA;AAAA,UAULY,MAVK,GAAA,WAAA,CAAA,MAAA;AAAA,UAWLM,QAXK,GAAA,WAAA,CAAA,QAAA;AAAA,UAYLC,IAZK,GAAA,WAAA,CAAA,IAAA;AAAA,UAaLC,WAbK,GAAA,WAAA,CAAA,WAAA;AAAA,UAcFC,UAdE,GAAA,wBAAA,CAAA,WAAA,EAAA,CAAA,WAAA,EAAA,SAAA,EAAA,QAAA,EAAA,UAAA,EAAA,cAAA,EAAA,OAAA,EAAA,aAAA,EAAA,OAAA,EAAA,QAAA,EAAA,UAAA,EAAA,MAAA,EAAA,aAAA,CAAA,CAAA;;AAiBP,aAAA,aACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAEC,UAAU,CAACC,YAAY,CAAA,QAAA,EAAb,QAAa,CAAb,EAAmC;AAC3D,6BAAmB,KAAA,KAAA,CADwC,OAAA;AAE3D,+BAAqB,CAAC,CAAC,KAFoC,KAAA;AAG3D,+BAAqB,CAAC,CAHqC,KAAA;AAI3D,8BAAoB,CAAC,CAACJ;AAJqC,SAAnC,EAAA,SAAA;AAA1B,OAAA,EAAA,aAME,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,EAAA,aACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,CADF,EAAA,aAEE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,EAAA,aACE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,QAAA,CAAA,EAAA,EAAA,UAAA,EAAA;AAEE,QAAA,GAAG,EAAE,KAFP,QAAA;AAGE,QAAA,IAAI,EAHN,MAAA;AAIE,QAAA,SAAS,EAJX,eAAA;AAKE,QAAA,OAAO,EAAE,KALX,OAAA;AAME,QAAA,MAAM,EAAE,KANV,MAAA;AAOE,QAAA,QAAQ,EAAE,KAPZ,QAAA;AAQE,QAAA,KAAK,EAAE,KAAKb;AARd,OAAA,CAAA,CADF,EAWGY,QAAQ,KAARA,GAAAA,IAAAA,KAAAA,IAAAA,aAA6B,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,EAXhC,KAWgC,CAXhC,EAAA,aAYE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,EAAA,aACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,EAAA,aACE,KAAA,CAAA,aAAA,CAAA,mBAAA,EADF,IACE,CADF,EAAA,aAEE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAd,0BAAA;AAA0C,QAAA,uBAAuB,EAAE;AAAEM,UAAAA,MAAM,EAAEzB;AAAV;AAAnE,OAAA,CAFF,CADF,CAZF,CAFF,EAAA,aAqBE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAd,eAAA;AAA+B,QAAA,OAAO,EAAE,KAAK0B;AAA7C,OAAA,EAAA,aACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,EACGN,IAAI,IAAA,aACH,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAO,QAAA,OAAO,EAAE,KAAhB,gBAAA;AAAuC,QAAA,SAAS,EAAC;AAAjD,OAAA,EAFJ,IAEI,CAFJ,EAMG,CAAC,CAAC,KAAF,KAAA,IAAA,aACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAO,QAAA,OAAO,EAAE,KAAhB,sBAAA;AAA6C,QAAA,SAAS,EAAC;AAAvD,OAAA,EAAA,aACE,KAAA,CAAA,aAAA,CAAA,WAAA,EATR,IASQ,CADF,CAPJ,CADF,EAaGD,QAAQ,KAARA,GAAAA,IAAAA,KAAAA,IAAAA,aACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,EA1CV,KA0CU,CAdJ,CArBF,CANF,CADF;AAgDD;;;wBAxHW;AACV,aAAO,KAAA,mBAAA,GAA2B,KAAA,KAAA,CAA3B,KAAA,GAA8C,KAAA,KAAA,CAArD,KAAA;AACD;;;;EA/BkBrB,S;;gBAAfD,M,kBAC+B;AACjCE,EAAAA,YAAY,EADqB,KAAA;AAEjCC,EAAAA,WAAW,EAFsB,OAAA;AAGjCC,EAAAA,KAAK,EAAE;AAH0B,C;;AAuJrC,eAAe0B,YAAY,CAA3B,MAA2B,CAA3B","sourcesContent":["import React, {\n  Component,\n  ReactNode,\n  FocusEvent,\n  FocusEventHandler,\n  InputHTMLAttributes,\n  ChangeEvent,\n  ChangeEventHandler,\n} from 'react';\nimport classNames from '../../lib/classNames';\nimport withPlatform from '../../hoc/withPlatform';\nimport getClassname from '../../helpers/getClassName';\nimport Icon16SearchOutline from '@vkontakte/icons/dist/16/search_outline';\nimport Icon16Clear from '@vkontakte/icons/dist/16/clear';\nimport { IOS } from '../../lib/platform';\nimport { HasPlatform, HasRef } from '../../types';\nimport Touch, { TouchEventHandler, TouchEvent } from '../Touch/Touch';\nimport { VKUITouchEvent } from '../../lib/touch';\n\nlet searchId = 0;\n\nexport type InputRef = (element: HTMLInputElement) => void;\n\nexport interface SearchProps extends InputHTMLAttributes<HTMLInputElement>, HasRef<HTMLInputElement>, HasPlatform {\n  /**\n   * iOS only. Текст кнопки \"отмена\", которая чистит текстовое поле и убирает фокус.\n   */\n  after?: ReactNode;\n  icon?: ReactNode;\n  onIconClick?: (e: VKUITouchEvent) => void;\n  defaultValue?: string;\n}\n\nexport interface SearchState {\n  value?: string;\n  focused?: boolean;\n}\n\nclass Search extends Component<SearchProps, SearchState> {\n  static defaultProps: SearchProps = {\n    autoComplete: 'off',\n    placeholder: 'Поиск',\n    after: 'Отмена',\n  };\n\n  isControlledOutside: boolean;\n\n  inputEl: HTMLInputElement;\n\n  searchId: string;\n\n  constructor(props: SearchProps) {\n    super(props);\n\n    const state: SearchState = {\n      focused: false,\n    };\n\n    if (props.hasOwnProperty('value')) {\n      this.isControlledOutside = true;\n    } else {\n      state.value = props.defaultValue || '';\n    }\n    this.searchId = `search-${searchId++}`;\n    this.state = state;\n  }\n\n  get value() {\n    return this.isControlledOutside ? this.props.value : this.state.value;\n  }\n\n  onFocus: FocusEventHandler = (e: FocusEvent<HTMLInputElement>) => {\n    this.setState({ focused: true });\n    this.props.onFocus && this.props.onFocus(e);\n  };\n\n  onBlur: FocusEventHandler = (e: FocusEvent<HTMLInputElement>) => {\n    this.setState({ focused: false });\n    this.props.onBlur && this.props.onBlur(e);\n  };\n\n  onChange: ChangeEventHandler = (e?: ChangeEvent<HTMLInputElement>) => {\n    const target = e.target as HTMLInputElement;\n    if (!this.isControlledOutside) {\n      this.setState({ value: target.value });\n    }\n    if (this.props.onChange) {\n      this.props.onChange(e);\n    }\n  };\n\n  onCancel: VoidFunction = () => {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value').set;\n    nativeInputValueSetter.call(this.inputEl, '');\n\n    const ev2 = new Event('input', { bubbles: true });\n    this.inputEl.dispatchEvent(ev2);\n  };\n\n  onIconClickStart: TouchEventHandler = (e: TouchEvent) => {\n    this.props.onIconClick && this.props.onIconClick(e.originalEvent);\n  };\n\n  onIconCancelClickStart: TouchEventHandler = (e: TouchEvent) => {\n    e.originalEvent.preventDefault();\n    this.inputEl.focus();\n    this.onCancel();\n  };\n\n  inputRef: InputRef = (element: HTMLInputElement) => {\n    const getRef = this.props.getRef;\n    this.inputEl = element;\n    if (getRef) {\n      if (typeof getRef === 'function') {\n        getRef(element);\n      } else {\n        getRef.current = element;\n      }\n    }\n  };\n\n  render() {\n    const {\n      className,\n      onFocus,\n      onBlur,\n      onChange,\n      defaultValue,\n      value,\n      placeholder,\n      after,\n      getRef,\n      platform,\n      icon,\n      onIconClick,\n      ...inputProps\n    } = this.props;\n\n    return (\n      <div className={classNames(getClassname('Search', platform), {\n        'Search--focused': this.state.focused,\n        'Search--has-value': !!this.value,\n        'Search--has-after': !!after,\n        'Search--has-icon': !!icon,\n      }, className)}>\n        <div className=\"Search__in\">\n          <div className=\"Search__width\" />\n          <div className=\"Search__control\">\n            <input\n              {...inputProps}\n              ref={this.inputRef}\n              type=\"text\"\n              className=\"Search__input\"\n              onFocus={this.onFocus}\n              onBlur={this.onBlur}\n              onChange={this.onChange}\n              value={this.value}\n            />\n            {platform === IOS && after && <div className=\"Search__after-width\">{after}</div>}\n            <div className=\"Search__placeholder\">\n              <div className=\"Search__placeholder-in\">\n                <Icon16SearchOutline />\n                <div className=\"Search__placeholder-text\" dangerouslySetInnerHTML={{ __html: placeholder }} />\n              </div>\n            </div>\n          </div>\n          <div className=\"Search__after\" onClick={this.onCancel}>\n            <div className=\"Search__icons\">\n              {icon &&\n                <Touch onStart={this.onIconClickStart} className=\"Search__icon\">\n                  {icon}\n                </Touch>\n              }\n              {!!this.value &&\n                <Touch onStart={this.onIconCancelClickStart} className=\"Search__icon\">\n                  <Icon16Clear />\n                </Touch>\n              }\n            </div>\n            {platform === IOS && after &&\n              <div className=\"Search__after-in\">{after}</div>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withPlatform(Search);\n"]},"metadata":{},"sourceType":"module"}