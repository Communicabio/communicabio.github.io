{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React, { Component } from 'react';\nimport Button from '../Button/Button';\nimport PanelHeaderButton from '../PanelHeaderButton/PanelHeaderButton';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport withInsets from '../../hoc/withInsets';\nimport Icon24Dismiss from '@vkontakte/icons/dist/24/dismiss';\nimport { IOS } from '../../lib/platform';\nimport { isNumeric } from '../../lib/utils';\nimport withPlatform from '../../hoc/withPlatform';\n\nvar ModalCard = /*#__PURE__*/function (_Component) {\n  _inherits(ModalCard, _Component);\n\n  var _super = _createSuper(ModalCard);\n\n  function ModalCard() {\n    var _this;\n\n    _classCallCheck(this, ModalCard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"onButtonClick\", function (event) {\n      var target = event.currentTarget; // eslint-disable-next-line @typescript-eslint/unbound-method\n\n      var action = _this.props.actions[Number(target.dataset.index)].action;\n\n      event.persist();\n\n      if (typeof action === 'function') {\n        action(event);\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(ModalCard, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          insets = _this$props.insets,\n          icon = _this$props.icon,\n          header = _this$props.header,\n          caption = _this$props.caption,\n          children = _this$props.children,\n          actions = _this$props.actions,\n          actionsLayout = _this$props.actionsLayout,\n          onClose = _this$props.onClose,\n          platform = _this$props.platform;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(getClassName('ModalCard', platform))\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ModalCard__in\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ModalCard__container\",\n        style: isNumeric(insets.bottom) ? {\n          marginBottom: insets.bottom\n        } : null\n      }, icon && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ModalCard__icon\"\n      }, icon), header && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ModalCard__title\"\n      }, header), caption && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ModalCard__caption\"\n      }, caption), children, actions.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames('ModalCard__actions', {\n          'ModalCard__actions--v': actionsLayout === 'vertical'\n        })\n      }, actions.map(function (_ref, i) {\n        var title = _ref.title,\n            mode = _ref.mode;\n        return /*#__PURE__*/React.createElement(Button, {\n          key: i,\n          \"data-index\": i,\n          size: \"xl\",\n          mode: mode,\n          onClick: _this2.onButtonClick\n        }, title);\n      })), platform === IOS && /*#__PURE__*/React.createElement(PanelHeaderButton, {\n        className: \"ModalCard__dismiss\",\n        onClick: onClose\n      }, /*#__PURE__*/React.createElement(Icon24Dismiss, null)))));\n    }\n  }]);\n\n  return ModalCard;\n}(Component);\n\n_defineProperty(ModalCard, \"defaultProps\", {\n  actions: [],\n  actionsLayout: 'horizontal',\n  insets: {}\n});\n\nexport default withPlatform(withInsets(ModalCard));","map":{"version":3,"sources":["../../../../src/components/ModalCard/ModalCard.tsx"],"names":["ModalCard","Component","actions","actionsLayout","insets","target","event","action","Number","icon","header","caption","children","onClose","platform","classNames","getClassName","marginBottom","bottom","title","mode","onButtonClick","withPlatform","withInsets"],"mappings":"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","sourcesContent":["import React, { Component, HTMLAttributes, MouseEventHandler, ReactNode, MouseEvent } from 'react';\nimport Button from '../Button/Button';\nimport PanelHeaderButton from '../PanelHeaderButton/PanelHeaderButton';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport withInsets from '../../hoc/withInsets';\nimport Icon24Dismiss from '@vkontakte/icons/dist/24/dismiss';\nimport { IOS } from '../../lib/platform';\nimport { isNumeric } from '../../lib/utils';\nimport withPlatform from '../../hoc/withPlatform';\nimport { HasChildren, HasInsets, HasPlatform } from '../../types';\n\nexport interface ModalCardActionInterface {\n  title: string;\n  action?(event: MouseEvent): void;\n  mode?: 'secondary' | 'primary';\n}\n\nexport interface ModalCardProps extends HTMLAttributes<HTMLElement>, HasPlatform, HasChildren, HasInsets {\n  /**\n   * Иконка.\n   *\n   * Может быть компонентом иконки, например, `<Icon56MoneyTransferOutline />`, или `<Avatar size={72} src=\"\" />`\n   */\n  icon?: ReactNode;\n\n  /**\n   * Заголовок карточки\n   */\n  header?: string;\n\n  /**\n   * Текст, поясняющий заголовок\n   */\n  caption?: string;\n\n  /**\n   * Список кнопок-действий\n   */\n  actions?: ModalCardActionInterface[];\n\n  /**\n   * Тип отображения кнопок: вертикальный или горизонтальный\n   */\n  actionsLayout?: 'vertical' | 'horizontal';\n\n  /**\n   * Будет вызван при закрытии карточки жестом\n   */\n  onClose?(): void;\n}\n\nclass ModalCard extends Component<ModalCardProps> {\n  static defaultProps: ModalCardProps = {\n    actions: [],\n    actionsLayout: 'horizontal',\n    insets: {},\n  };\n\n  onButtonClick: MouseEventHandler = (event: MouseEvent) => {\n    const target = event.currentTarget as HTMLButtonElement;\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const action = this.props.actions[Number(target.dataset.index)].action;\n    event.persist();\n\n    if (typeof action === 'function') {\n      action(event);\n    }\n  };\n\n  render() {\n    const { insets, icon, header, caption, children, actions, actionsLayout, onClose, platform } = this.props;\n\n    return (\n      <div className={classNames(getClassName('ModalCard', platform))}>\n        <div className=\"ModalCard__in\">\n          <div className=\"ModalCard__container\" style={isNumeric(insets.bottom) ? { marginBottom: insets.bottom } : null}>\n            {icon && <div className=\"ModalCard__icon\">{icon}</div>}\n            {header && <div className=\"ModalCard__title\">{header}</div>}\n            {caption && <div className=\"ModalCard__caption\">{caption}</div>}\n\n            {children}\n\n            {actions.length > 0 &&\n            <div className={classNames('ModalCard__actions', {\n              'ModalCard__actions--v': actionsLayout === 'vertical',\n            })}>\n              {actions.map(({ title, mode }: ModalCardActionInterface, i: number) => {\n                return (\n                  <Button\n                    key={i}\n                    data-index={i}\n                    size=\"xl\"\n                    mode={mode}\n                    onClick={this.onButtonClick}\n                  >\n                    {title}\n                  </Button>\n                );\n              })}\n            </div>\n            }\n\n            {platform === IOS &&\n            <PanelHeaderButton className=\"ModalCard__dismiss\" onClick={onClose}>\n              <Icon24Dismiss />\n            </PanelHeaderButton>}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withPlatform(withInsets(ModalCard));\n"]},"metadata":{},"sourceType":"module"}