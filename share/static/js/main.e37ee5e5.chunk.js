(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{179:function(e,t,a){e.exports=a(244)},235:function(e,t,a){e.exports=a.p+"static/media/communicabio.e8edc935.svg"},244:function(e,t,a){"use strict";a.r(t);a(180),a(204);var n=a(0),r=a.n(n),o=a(57),i=a.n(o),c=a(58),s=a.n(c),u=a(60),l=a.n(u),h=a(94),p=a(43),d=a(44),m=a(46),y=a(45),b=a(47),v=a(22),f=a(25),g=(a(222),a(223),a(224),a(225),a(100)),j=a.n(g),k=a(101),E=a.n(k),O=a(102),w=a.n(O),_=a(99),x=a.n(_),C=a(103),H=a.n(C),P=a(61),R=a.n(P),z=(a(226),a(227),a(86),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(y.a)(t).call(this))).props=e,console.log(a.props),a.get_chat_history=a.get_chat_history.bind(Object(v.a)(Object(v.a)(a))),a.state={history:a.get_chat_history()},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"get_chat_history",value:function(){for(var e=this.props.history,t=[],a=0;a<e.length;a+=1)t.push({text:e[a],actor:a%2});return console.log("last_dialog "+t),t}},{key:"message2Cell",value:function(e){return 0==e.actor?r.a.createElement(R.a,{multiline:!0,before:r.a.createElement(x.a,{src:a(235)})},e.text):r.a.createElement(R.a,{multiline:!0},e.text)}},{key:"componentDidMount",value:function(){var e=document.createElement("script");e.text='VK.Widgets.Auth("vk_auth", {"authUrl":"/app", "width": 300})',e.async=!0,document.body.appendChild(e)}},{key:"chatRender",value:function(){var e=this;return r.a.createElement(j.a,{id:this.props.id},r.a.createElement(E.a,null,"Communicabio"),r.a.createElement("div",{id:"vk_auth"}),r.a.createElement(w.a,{id:"chat-parent"},this.state.history.map(function(t){return r.a.createElement(H.a,{mode:{0:"shadow",1:"tint"}[t.actor],size:"l"},e.message2Cell(t))})))}},{key:"render",value:function(){return console.log("home-render"),console.log(this.props),null==this.state.popout?this.chatRender():"feedback"===this.state.popout?this.renderFeedbackPanel():"loading"===this.state.popout?this.loadigRender():this.state.popout}}]),t}(r.a.Component)),A=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(y.a)(t).call(this,e))).state={activePanel:"home",activeStory:"chat"},a.setHistory=a.setHistory.bind(Object(v.a)(Object(v.a)(a))),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"setHistory",value:function(){var e=Object(h.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,this.setState({history:a.dialog});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=window.location.search;fetch("https://communicabio-server-b7e3qu3u4a-uc.a.run.app/dialog"+t).then(function(t){e.setHistory(t)})}},{key:"renderHome",value:function(){return null==this.state.history?r.a.createElement(f.a,{id:"home"},r.a.createElement(f.b,{size:"large",style:{marginTop:50}})):r.a.createElement(z,{id:"home",history:this.state.history})}},{key:"render",value:function(){return r.a.createElement(f.c,{id:"chat",activePanel:this.state.activePanel},this.renderHome())}}]),t}(r.a.Component);s.a.send("VKWebAppInit",{}),i.a.render(r.a.createElement(A,null),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.e37ee5e5.chunk.js.map