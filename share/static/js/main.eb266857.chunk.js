(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{179:function(t,e,a){t.exports=a(244)},235:function(t,e,a){t.exports=a.p+"static/media/communicabio.e8edc935.svg"},244:function(t,e,a){"use strict";a.r(e);a(180),a(204);var n=a(0),r=a.n(n),o=a(57),i=a.n(o),c=a(58),s=a.n(c),u=a(60),l=a.n(u),h=a(94),p=a(43),d=a(44),m=a(46),y=a(45),b=a(47),v=a(22),f=a(25),g=(a(222),a(223),a(224),a(225),a(100)),j=a.n(g),k=a(101),E=a.n(k),O=a(102),w=a.n(O),_=a(99),x=a.n(_),C=a(103),H=a.n(C),P=a(61),R=a.n(P),z=(a(226),a(227),a(86),function(t){function e(t){var a;return Object(p.a)(this,e),(a=Object(m.a)(this,Object(y.a)(e).call(this))).props=t,console.log(a.props),a.get_chat_history=a.get_chat_history.bind(Object(v.a)(Object(v.a)(a))),a.state={history:a.get_chat_history(a.props.history)},a}return Object(b.a)(e,t),Object(d.a)(e,[{key:"get_chat_history",value:function(){for(var t=this.state.history,e=[],a=0;a<t.length;a+=1)e.push({text:t[a],actor:a%2});return console.log("last_dialog "+e),e}},{key:"message2Cell",value:function(t){return 0==t.actor?r.a.createElement(R.a,{multiline:!0,before:r.a.createElement(x.a,{src:a(235)})},t.text):r.a.createElement(R.a,{multiline:!0},t.text)}},{key:"componentDidMount",value:function(){var t=document.createElement("script");t.text='VK.Widgets.Auth("vk_auth", {"authUrl":"/app"})',t.async=!0,document.body.appendChild(t)}},{key:"chatRender",value:function(){var t=this;return r.a.createElement(j.a,{id:this.props.id},r.a.createElement(E.a,null,"Communicabio"),r.a.createElement("div",{id:"vk_auth"}),r.a.createElement(w.a,{id:"chat-parent"},this.state.history.map(function(e){return r.a.createElement(H.a,{mode:{0:"shadow",1:"tint"}[e.actor],size:"l"},t.message2Cell(e))})))}},{key:"render",value:function(){return console.log("home-render"),console.log(this.props),null==this.state.popout?this.chatRender():"feedback"===this.state.popout?this.renderFeedbackPanel():"loading"===this.state.popout?this.loadigRender():this.state.popout}}]),e}(r.a.Component)),A=function(t){function e(t){var a;return Object(p.a)(this,e),(a=Object(m.a)(this,Object(y.a)(e).call(this,t))).state={activePanel:"home",activeStory:"chat"},a.setHistory=a.setHistory.bind(Object(v.a)(Object(v.a)(a))),a}return Object(b.a)(e,t),Object(d.a)(e,[{key:"setHistory",value:function(){var t=Object(h.a)(l.a.mark(function t(e){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:a=t.sent,this.setState({history:a.dialog});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=this,e=window.location.search;fetch("https://communicabio-server-b7e3qu3u4a-uc.a.run.app/dialog"+e).then(function(e){t.setHistory(e)})}},{key:"renderHome",value:function(){return null==this.state.history?r.a.createElement(f.a,{id:"home"},r.a.createElement(f.b,{size:"large",style:{marginTop:50}})):r.a.createElement(z,{id:"home",history:this.state.history})}},{key:"render",value:function(){return r.a.createElement(f.c,{id:"chat",activePanel:this.state.activePanel},this.renderHome())}}]),e}(r.a.Component);s.a.send("VKWebAppInit",{}),i.a.render(r.a.createElement(A,null),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.eb266857.chunk.js.map